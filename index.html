<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸å­—æ–°è¾²äºº - æ±ºç­–æ•¸æ“šå¯è¦–åŒ–</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
       @font-face {
            font-family: 'FZLBK';
            src: url('./fonts/FZLBK.TTF') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
       @font-face {
            font-family: 'FZYanZQKSJF';
            src: url('./fonts/FZYanZQKSJF.TTF') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        body {
            font-family: 'FZYanZQKSJF', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f5f0;
            color: #333;
            font-size: 16px;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-image: linear-gradient(to right, #8bc34a, #4caf50);
            color: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        h1 {
            font-family: 'FZLBK', sans-serif;
            margin: 0;
            font-size: 50px;
            line-height: 1.2;
            margin-bottom: 10px;
        }
        header p {
            font-size: 1.1rem;
            margin: 0;
            opacity: 0.9;
        }
        .decision-path {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .path-title {
            color: #2e7d32;
            border-bottom: 2px solid #8bc34a;
            padding-bottom: 12px;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        .decision-steps {
            margin: 25px 0;
        }
        .step {
            margin: 20px 0;
        }
        .step-title {
            font-weight: bold;
            color: #3e9c48;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 12px;
        }
        .option {
            background-color: #e8f5e9;
            border: 1px solid #a5d6a7;
            border-radius: 6px;
            padding: 10px 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.2rem;
        }
        .option:hover {
            background-color: #c8e6c9;
        }
        .option.selected {
            background-color: #81c784;
            color: white;
            border-color: #4caf50;
        }
        .option.combo {
            background-color: #e8f5e9;
            border: 1px solid #aed581;
        }
        .option.combo.selected {
            background-color: #81c784;
        }
        .chart-container {
            margin: 25px 0;
            height: 320px;
        }
        .results {
            background-color: #f1f8e9;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
        }
        .results-title {
            color: #2e7d32;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        .metric {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .metric-name {
            font-size: 1rem;
            color: #757575;
            margin-bottom: 5px;
        }
        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2e7d32;
            line-height: 1.2;
        }
        .metric-value.negative {
            color: #f44336;
        }
        .view-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        .view-button {
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'FZYanZQKSJF', sans-serif;
            letter-spacing: 1px;
            min-width: 120px;
            font-size: 1.2rem;
        }
        .view-button:hover {
            background-color: #388e3c;
        }
        .view-button.active {
            background-color: #2e7d32;
        }
        .path-container {
            display: none;
        }
        .path-container.active {
            display: block;
        }
        .final-results {
            background-color: #e8f5e9;
            border-radius: 8px;
            padding: 25px;
            margin-top: 25px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .final-results h2 {
            color: #2e7d32;
            margin-top: 0;
            font-size: 1.5rem;
        }
        .final-results p {
            margin-bottom: 15px;
            font-size: 1.05rem;
        }
        .achievement {
            font-size: 1.5rem;
            color: #2e7d32;
            margin: 15px 0;
            font-weight: bold;
        }
        .decision-explanation {
            background-color: #e8f5e9;
            border-radius: 8px;
            padding: 25px;
            margin-top: 25px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .explanation-title {
            color: #2e7d32;
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px solid #a5d6a7;
            padding-bottom: 12px;
            font-size: 1.3rem;
        }
        .explanation-content {
            margin-top: 15px;
            font-size: 1.2rem;
            line-height: 1.7;
        }
        .explanation-content p {
            margin-bottom: 15px;
        }
        .combo-effect {
            color: #d84315;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            body {
                font-size: 15px;
            }
            .container {
                padding: 15px;
            }
            h1 {
                font-size: 2rem;
            }
            .metrics {
                grid-template-columns: 1fr;
            }
            .options {
                flex-direction: column;
            }
            .option {
                padding: 12px;
            }
            .view-button {
                padding: 10px 15px;
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>æ•¸å­—æ–°è¾²äºº - æ±ºç­–æ•¸æ“šåˆ†æ</h1>
            <p>æŸ¥çœ‹ä¸åŒæ±ºç­–è·¯å¾‘å°é„‰æ‘ç™¼å±•çš„å½±éŸ¿</p>
        </header>
        
        <div class="view-controls">
            <button class="view-button active" data-path="livestream">ç›´æ’­å¸¶è²¨</button>
            <button class="view-button" data-path="smartfarming">æ™ºæ…§è¾²æ¥­</button>
            <button class="view-button" data-path="tourism">é„‰æ‘æ—…éŠ</button>
        </div>
        
        <!-- ç›´æ’­å¸¶è²¨è·¯å¾‘ -->
        <div id="livestream-path" class="path-container active">
            <div class="decision-path">
                <h2 class="path-title">ç›´æ’­å¸¶è²¨ç™¼å±•è·¯å¾‘</h2>
                
                <div class="decision-steps">
                    <div class="step">
                        <div class="step-title">æ±ºç­–1ï¼šé¸æ“‡ä¸»æ¨è¾²ç”¢å“</div>
                        <div class="options">
                            <div class="option selected" data-value="æ¾èŒ¸">æ¾èŒ¸</div>
                            <div class="option" data-value="è“®å­">è“®å­</div>
                            <div class="option" data-value="æ¢­å­èŸ¹">æ¢­å­èŸ¹</div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-title">æ±ºç­–2ï¼šç›´æ’­é–“é¢¨æ ¼</div>
                        <div class="options">
                            <div class="option selected combo" data-value="ç”°åœ’é¢¨">ç”°åœ’é¢¨</div>
                            <div class="option combo" data-value="ç§‘æŠ€æ„Ÿ">ç§‘æŠ€æ„Ÿ</div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-title">æ±ºç­–3ï¼šç”¢å“æ ¸å¿ƒè³£é»</div>
                        <div class="options">
                            <div class="option selected combo" data-value="å¤æ³•å·¥è—">å¤æ³•å·¥è—</div>
                            <div class="option" data-value="åŠ©è¾²æƒ…æ‡·">åŠ©è¾²æƒ…æ‡·</div>
                            <div class="option combo" data-value="ç”¢åœ°ç›´æ¡">ç”¢åœ°ç›´æ¡</div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-title">æ±ºç­–4ï¼šæ‹¯æ•‘æµé‡ä½è¿·å±æ©Ÿ</div>
                        <div class="options">
                            <div class="option selected" data-value="ç°½ç´„ç¶²ç´…">ç°½ç´„ç¶²ç´…</div>
                            <div class="option" data-value="ç åƒ¹0å…ƒè³¼">ç åƒ¹0å…ƒè³¼</div>
                            <div class="option" data-value="å½ˆå¹•æŠ½ç">å½ˆå¹•æŠ½ç</div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-title">æ±ºç­–5ï¼šè§£æ±ºé‹è¼¸æˆæœ¬éé«˜</div>
                        <div class="options">
                            <div class="option selected" data-value="èˆ‡ç‰©æµå…¬å¸è«‡åˆ¤">èˆ‡ç‰©æµå…¬å¸è«‡åˆ¤</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="livestreamChart"></canvas>
                </div>
                
                <div class="results">
                    <h3 class="results-title">ç¶“ç‡Ÿçµæœ</h3>
                    <div class="metrics">
                        <div class="metric">
                            <div class="metric-name">éŠ·å”®é¡å¢é•·</div>
                            <div class="metric-value" id="livestream-sales">+0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-name">ç²‰çµ²æ•¸é‡å¢é•·</div>
                            <div class="metric-value" id="livestream-fans">+0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-name">æ‘æ°‘æ”¶å…¥å¢é•·</div>
                            <div class="metric-value" id="livestream-income">+0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-name">å¸¶å‹•å°±æ¥­å¢é•·</div>
                            <div class="metric-value" id="livestream-jobs">+0%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ™ºæ…§è¾²æ¥­è·¯å¾‘ -->
        <div id="smartfarming-path" class="path-container">
            <div class="decision-path">
                <h2 class="path-title">æ™ºæ…§è¾²æ¥­ç™¼å±•è·¯å¾‘</h2>
                
                <div class="decision-steps">
                    <div class="step">
                        <div class="step-title">æ±ºç­–1ï¼šæé«˜è¾²ä½œç‰©ç”¢é‡</div>
                        <div class="options">
                            <div class="option selected" data-value="ç¯€æ°´çŒæº‰">ç¯€æ°´çŒæº‰</div>
                            <div class="option" data-value="ç—…èŸ²å®³é è­¦">ç—…èŸ²å®³é è­¦</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="farmingChart"></canvas>
                </div>
                
                <div class="results">
                    <h3 class="results-title">è¾²æ¥­ç”Ÿç”¢çµæœ</h3>
                    <div class="metrics">
                        <div class="metric">
                            <div class="metric-name">ç”¢é‡å¢é•·</div>
                            <div class="metric-value" id="farming-yield">+0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-name">è³‡æºç¯€ç´„ç‡</div>
                            <div class="metric-value" id="farming-resource">+0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-name">è¾²æ°‘æ”¶å…¥å¢é•·</div>
                            <div class="metric-value" id="farming-income">+0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-name">è€•åœ°æ•ˆç‡æå‡</div>
                            <div class="metric-value" id="farming-efficiency">+0%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é„‰æ‘æ—…éŠè·¯å¾‘ -->
        <div id="tourism-path" class="path-container">
            <div class="decision-path">
                <h2 class="path-title">é„‰æ‘æ—…éŠç™¼å±•è·¯å¾‘</h2>
                
                <div class="decision-steps">
                    <div class="step">
                        <div class="step-title">æ±ºç­–1ï¼šé„‰æ‘æ—…éŠç”¢å“</div>
                        <div class="options">
                            <div class="option selected" data-value="æˆ¶å¤–ç ”å­¸">æˆ¶å¤–ç ”å­¸</div>
                            <div class="option" data-value="ééºå·¥ä½œåŠ">ééºå·¥ä½œåŠ</div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-title">æ±ºç­–2ï¼šä½ˆç½®é…å¥—è¨­æ–½</div>
                        <div class="options">
                            <div class="option selected" data-value="æ°‘å®¿">æ°‘å®¿</div>
                            <div class="option" data-value="åœè»Šå ´">åœè»Šå ´</div>
                            <div class="option" data-value="å»æ‰€">å»æ‰€</div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-title">æ±ºç­–3ï¼šå®‰æ’«æŠ•è¨´éŠå®¢</div>
                        <div class="options">
                            <div class="option selected" data-value="å…è²»å‡ç´šæˆ¿å‹">å…è²»å‡ç´šæˆ¿å‹</div>
                            <div class="option" data-value="è´ˆé€ç‰¹è‰²è¾²ç”¢å“">è´ˆé€ç‰¹è‰²è¾²ç”¢å“</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="tourismChart"></canvas>
                </div>
                
                <div class="results">
                    <h3 class="results-title">æ—…éŠç¶“ç‡Ÿçµæœ</h3>
                    <div class="metrics">
                        <div class="metric">
                            <div class="metric-name">éŠå®¢æ•¸é‡å¢é•·</div>
                            <div class="metric-value" id="tourism-visitors">+0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-name">éŠå®¢æ»¿æ„åº¦è®ŠåŒ–</div>
                            <div class="metric-value" id="tourism-satisfaction">+0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-name">ç•¶åœ°å°±æ¥­å¢é•·</div>
                            <div class="metric-value" id="tourism-employment">+0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-name">å¾©éŠç‡æå‡</div>
                            <div class="metric-value" id="tourism-return">+0%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="final-results">
            <h2>ç™¼å±•æˆå°±</h2>
            <p>æ ¹æ“šæ‚¨çš„æ±ºç­–è·¯å¾‘ï¼Œæ‚¨ç²å¾—äº†ä»¥ä¸‹æˆå°±ï¼š</p>
            <div class="achievement" id="achievement-title">æœªç²å¾—æˆå°±</div>
        </div>
        
        <div class="decision-explanation">
            <h3 class="explanation-title">æ±ºç­–å½±éŸ¿èªªæ˜</h3>
            <div class="explanation-content" id="explanation-content">
                <!-- é€™è£¡æœƒå‹•æ…‹é¡¯ç¤ºæ±ºç­–å½±éŸ¿èªªæ˜ -->
            </div>
        </div>
    </div>

    <script>
        // åˆ‡æ›è·¯å¾‘è¦–åœ–
        document.querySelectorAll('.view-button').forEach(button => {
            button.addEventListener('click', function() {
                // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„æ´»èºç‹€æ…‹
                document.querySelectorAll('.view-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // ç§»é™¤æ‰€æœ‰è·¯å¾‘çš„æ´»èºç‹€æ…‹
                document.querySelectorAll('.path-container').forEach(path => {
                    path.classList.remove('active');
                });
                
                // æ·»åŠ ç•¶å‰æŒ‰éˆ•å’Œè·¯å¾‘çš„æ´»èºç‹€æ…‹
                this.classList.add('active');
                const pathId = this.getAttribute('data-path') + '-path';
                document.getElementById(pathId).classList.add('active');
                
                // é‡æ–°è¨ˆç®—çµæœ
                calculateResults();
            });
        });
        
        // é¸æ“‡é¸é …
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                // ç§»é™¤åŒç´šé¸é …çš„é¸ä¸­ç‹€æ…‹
                const parent = this.closest('.options');
                parent.querySelectorAll('.option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // å°‡ç•¶å‰é¸é …è¨­ç‚ºé¸ä¸­ç‹€æ…‹
                this.classList.add('selected');
                
                // é‡æ–°è¨ˆç®—çµæœ
                calculateResults();
            });
        });
        
        // å‰µå»ºåœ–è¡¨
        let livestreamChart, farmingChart, tourismChart;
        
        function initCharts() {
            // ç›´æ’­å¸¶è²¨åœ–è¡¨
            const livestreamCtx = document.getElementById('livestreamChart').getContext('2d');
            livestreamChart = new Chart(livestreamCtx, {
                type: 'line',
                data: {
                    labels: ['é–‹å§‹', 'ç¬¬1é€±', 'ç¬¬2é€±', 'ç¬¬3é€±', 'ç¬¬4é€±', 'ç¬¬5é€±', 'ç¬¬6é€±'],
                    datasets: [{
                        label: 'éŠ·å”®é¡å¢é•·',
                        data: [0, 0, 0, 0, 0, 0, 0],
                        borderColor: '#4caf50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'ç²‰çµ²æ•¸é‡å¢é•·',
                        data: [0, 0, 0, 0, 0, 0, 0],
                        borderColor: '#ff9800',
                        backgroundColor: 'rgba(255, 152, 0, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                display: false
                            },
                            ticks: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
            
            // æ™ºæ…§è¾²æ¥­åœ–è¡¨
            const farmingCtx = document.getElementById('farmingChart').getContext('2d');
            farmingChart = new Chart(farmingCtx, {
                type: 'line',
                data: {
                    labels: ['é–‹å§‹', 'ç¬¬1å€‹æœˆ', 'ç¬¬2å€‹æœˆ', 'ç¬¬3å€‹æœˆ', 'ç¬¬4å€‹æœˆ', 'ç¬¬5å€‹æœˆ', 'ç¬¬6å€‹æœˆ'],
                    datasets: [{
                        label: 'ç”¢é‡å¢é•·',
                        data: [0, 0, 0, 0, 0, 0, 0],
                        borderColor: '#2196f3',
                        backgroundColor: 'rgba(33, 150, 243, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'æˆæœ¬ç¯€ç´„',
                        data: [0, 0, 0, 0, 0, 0, 0],
                        borderColor: '#9c27b0',
                        backgroundColor: 'rgba(156, 39, 176, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                display: false
                            },
                            ticks: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
            
            // é„‰æ‘æ—…éŠåœ–è¡¨
            const tourismCtx = document.getElementById('tourismChart').getContext('2d');
            tourismChart = new Chart(tourismCtx, {
                type: 'line',
                data: {
                    labels: ['é–‹å§‹', 'ç¬¬1å€‹æœˆ', 'ç¬¬2å€‹æœˆ', 'ç¬¬3å€‹æœˆ', 'ç¬¬4å€‹æœˆ', 'ç¬¬5å€‹æœˆ', 'ç¬¬6å€‹æœˆ'],
                    datasets: [{
                        label: 'éŠå®¢æ•¸é‡å¢é•·',
                        data: [0, 0, 0, 0, 0, 0, 0],
                        borderColor: '#e91e63',
                        backgroundColor: 'rgba(233, 30, 99, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'æ»¿æ„åº¦è®ŠåŒ–',
                        data: [0, 0, 0, 0, 0, 0, 0],
                        borderColor: '#ffc107',
                        backgroundColor: 'rgba(255, 193, 7, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                display: false
                            },
                            ticks: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
        }
        
        // æ ¹æ“šé¸æ“‡è¨ˆç®—çµæœ
        function calculateResults() {
            // ç²å–ç•¶å‰æ´»èºçš„è·¯å¾‘
            const activePath = document.querySelector('.path-container.active').id;
            let explanationText = "";
            
            if (activePath === 'livestream-path') {
                // ç²å–ç›´æ’­å¸¶è²¨çš„é¸æ“‡
                const product = document.querySelector('#livestream-path .step:nth-child(1) .option.selected').getAttribute('data-value');
                const style = document.querySelector('#livestream-path .step:nth-child(2) .option.selected').getAttribute('data-value');
                const selling = document.querySelector('#livestream-path .step:nth-child(3) .option.selected').getAttribute('data-value');
                const crisis = document.querySelector('#livestream-path .step:nth-child(4) .option.selected').getAttribute('data-value');
                
                // è¨ˆç®—éŠ·å”®é¡æ•¸æ“š
                let salesData = [0];
                let fansData = [0];
                let maxSales = 0;
                let maxFans = 0;
                let comboBonus = 1; // çµ„åˆåŠ æˆ
                
                explanationText = "<p><strong>ä¸»æ¨è¾²ç”¢å“ï¼š</strong>";
                if (product === 'æ¾èŒ¸') {
                    maxSales = 25; // æ¾èŒ¸åŸºç¤éŠ·å”®é¡é«˜
                    maxFans = 20;
                    explanationText += "æ¾èŒ¸æ˜¯é«˜åƒ¹å€¼è¾²ç”¢å“ï¼ŒåŸºç¤éŠ·å”®é¡è¼ƒé«˜(+25%)ï¼Œèƒ½å¸å¼•é«˜ç«¯å®¢æˆ¶ç¾¤é«”ã€‚";
                } else if (product === 'è“®å­') {
                    maxSales = 18;
                    maxFans = 15;
                    explanationText += "è“®å­æ˜¯å‚³çµ±è¾²ç”¢å“ï¼ŒåŸºç¤éŠ·å”®é¡ä¸­ç­‰(+18%)ï¼Œå—çœ¾å»£æ³›ä½†åˆ©æ½¤ç‡è¼ƒä½ã€‚";
                } else if (product === 'æ¢­å­èŸ¹') {
                    maxSales = 22;
                    maxFans = 18;
                    explanationText += "æ¢­å­èŸ¹æ˜¯æµ·é®®ç”¢å“ï¼ŒåŸºç¤éŠ·å”®é¡è¼ƒé«˜(+22%)ï¼Œä½†é‹è¼¸å’Œä¿å­˜æˆæœ¬è¼ƒé«˜ã€‚";
                }
                
                explanationText += "</p><p><strong>ç›´æ’­é–“é¢¨æ ¼ï¼š</strong>";
                if (style === 'ç”°åœ’é¢¨') {
                    maxSales *= 1.2; // ç”°åœ’é¢¨å¢åŠ éŠ·å”®é¡
                    explanationText += "ç”°åœ’é¢¨æ ¼ç›´æ’­é–“èƒ½å¢å¼·è¾²ç”¢å“çœŸå¯¦æ„Ÿï¼ŒéŠ·å”®é¡+20%ã€‚";
                    // æª¢æŸ¥çµ„åˆæ•ˆæœ
                    if (selling === 'å¤æ³•å·¥è—' || selling === 'ç”¢åœ°ç›´æ¡') {
                        comboBonus = 1.15;
                        explanationText += " <span class='combo-effect'>èˆ‡" + selling + "å½¢æˆè‰¯å¥½çµ„åˆï¼Œæ•ˆæœé¡å¤–+15%ï¼</span>";
                    }
                } else if (style === 'ç§‘æŠ€æ„Ÿ') {
                    maxFans *= 1.3; // ç§‘æŠ€æ„Ÿå¢åŠ ç²‰çµ²æ•¸
                    explanationText += "ç§‘æŠ€æ„Ÿç›´æ’­é–“å¸å¼•å¹´è¼•ç¾¤é«”ï¼Œç²‰çµ²å¢é•·+30%ã€‚";
                }
                
                explanationText += "</p><p><strong>ç”¢å“æ ¸å¿ƒè³£é»ï¼š</strong>";
                if (selling === 'å¤æ³•å·¥è—') {
                    maxSales *= 1.1 * comboBonus;
                    explanationText += "å¤æ³•å·¥è—å¼·èª¿å‚³çµ±åƒ¹å€¼ï¼ŒéŠ·å”®é¡+10%";
                    if (comboBonus > 1) explanationText += "(çµ„åˆåŠ æˆå¾Œ+" + (10*comboBonus).toFixed(0) + "%)";
                } else if (selling === 'åŠ©è¾²æƒ…æ‡·') {
                    maxFans *= 1.2;
                    explanationText += "åŠ©è¾²æƒ…æ‡·å¸å¼•ç¤¾æœƒè²¬ä»»æ„Ÿå¼·çš„æ¶ˆè²»è€…ï¼Œç²‰çµ²å¢é•·+20%";
                } else if (selling === 'ç”¢åœ°ç›´æ¡') {
                    maxSales *= 1.15 * comboBonus;
                    maxFans *= 1.05;
                    explanationText += "ç”¢åœ°ç›´æ¡å¼·èª¿æ–°é®®åº¦ï¼ŒéŠ·å”®é¡+15%ï¼Œç²‰çµ²+5%";
                    if (comboBonus > 1) explanationText += "(çµ„åˆåŠ æˆå¾ŒéŠ·å”®é¡+" + (15*comboBonus).toFixed(0) + "%)";
                }
                
                explanationText += "</p><p><strong>æµé‡å±æ©Ÿè™•ç†ï¼š</strong>";
                if (crisis === 'ç°½ç´„ç¶²ç´…') {
                    maxFans *= 1.5;
                    maxSales *= 1.3;
                    explanationText += "ç°½ç´„ç¶²ç´…èƒ½å¿«é€Ÿæå‡æµé‡ï¼Œç²‰çµ²å¢é•·+50%ï¼ŒéŠ·å”®é¡+30%ï¼Œä½†æˆæœ¬è¼ƒé«˜ã€‚";
                } else if (crisis === 'ç åƒ¹0å…ƒè³¼') {
                    maxSales *= 1.4;
                    explanationText += "ç åƒ¹0å…ƒè³¼æ´»å‹•åˆºæ¿€æ¶ˆè²»ï¼ŒéŠ·å”®é¡+40%ï¼Œä½†åˆ©æ½¤ç‡æœƒä¸‹é™ã€‚";
                } else if (crisis === 'å½ˆå¹•æŠ½ç') {
                    maxFans *= 1.3;
                    maxSales *= 1.2;
                    explanationText += "å½ˆå¹•æŠ½çæé«˜äº’å‹•ç‡ï¼Œç²‰çµ²å¢é•·+30%ï¼ŒéŠ·å”®é¡+20%ã€‚";
                }
                
                // ç”Ÿæˆå¢é•·æ›²ç·š
                for (let i = 1; i <= 6; i++) {
                    // éç·šæ€§å¢é•·æ›²ç·š
                    let growth = i <= 3 ? i/3 : (i-1)/5 + 0.6;
                    salesData.push(Math.round(maxSales * growth));
                    fansData.push(Math.round(maxFans * growth));
                }
                
                // æ›´æ–°åœ–è¡¨
                livestreamChart.data.datasets[0].data = salesData;
                livestreamChart.data.datasets[1].data = fansData;
                livestreamChart.update();
                
                // æ›´æ–°çµæœæŒ‡æ¨™
                const finalSales = salesData[salesData.length - 1];
                const finalFans = fansData[fansData.length - 1];
                const income = Math.round(finalSales * 2.5);
                const jobs = Math.round(finalSales * 0.8);
                
                // å‹•ç•«æ›´æ–°æ•¸å€¼
                animateValue('livestream-sales', '+' + finalSales + '%', finalSales);
                animateValue('livestream-fans', '+' + finalFans + '%', finalFans);
                animateValue('livestream-income', '+' + income + '%', income);
                animateValue('livestream-jobs', '+' + jobs + '%', jobs);
                
                // æ›´æ–°æˆå°±
                if (finalSales > 30 && finalFans > 35) {
                    document.getElementById('achievement-title').textContent = 'ğŸ† ç›´æ’­å¸¶è²¨ç‹è€…';
                } else if (finalSales > 25) {
                    document.getElementById('achievement-title').textContent = 'ğŸŒŸ é›»å•†åŠ©è¾²é”äºº';
                } else if (finalSales > 20) {
                    document.getElementById('achievement-title').textContent = 'ğŸŒ¾ åˆç´šè¾²ç”¢å“ç¶“ç´€äºº';
                } else if (finalSales > 15) {
                    document.getElementById('achievement-title').textContent = 'ğŸ›’ æ–°æ‰‹ç›´æ’­ä¸»';
                } else {
                    document.getElementById('achievement-title').textContent = 'ğŸ” æ•¸å­—ç‡ŸéŠ·æ¢ç´¢è€…';
                }
                
            } else if (activePath === 'smartfarming-path') {
                // ç²å–æ™ºæ…§è¾²æ¥­çš„é¸æ“‡
                const tech = document.querySelector('#smartfarming-path .step:nth-child(1) .option.selected').getAttribute('data-value');
                
                // è¨ˆç®—ç”¢é‡æ•¸æ“š
                let yieldData = [0];
                let savingData = [0];
                let maxYield = 0;
                let maxSaving = 0;
                
                explanationText = "<p><strong>è¾²æ¥­æŠ€è¡“é¸æ“‡ï¼š</strong>";
                if (tech === 'ç¯€æ°´çŒæº‰') {
                    maxYield = 25; // èª¿æ•´ç‚º20-30%
                    maxSaving = 30;
                    explanationText += "ç¯€æ°´çŒæº‰æŠ€è¡“èƒ½æé«˜ç”¢é‡25%ï¼ŒåŒæ™‚ç¯€ç´„æ°´è³‡æº30%ã€‚";
                } else if (tech === 'ç—…èŸ²å®³é è­¦') {
                    maxYield = 20; // èª¿æ•´ç‚º15-25%
                    maxSaving = 20;
                    explanationText += "ç—…èŸ²å®³é è­¦ç³»çµ±èƒ½æ¸›å°‘æå¤±ï¼Œæé«˜ç”¢é‡20%ï¼Œæ¸›å°‘è¾²è—¥ä½¿ç”¨20%ã€‚";
                }
                
                // ç”Ÿæˆå¢é•·æ›²ç·š
                for (let i = 1; i <= 6; i++) {
                    // è¾²æ¥­å¢é•·æ›²ç·šæ›´å¹³æ»‘
                    let growth = Math.pow(i/6, 0.8);
                    yieldData.push(Math.round(maxYield * growth));
                    savingData.push(Math.round(maxSaving * growth));
                }
                
                // æ›´æ–°åœ–è¡¨
                farmingChart.data.datasets[0].data = yieldData;
                farmingChart.data.datasets[1].data = savingData;
                farmingChart.update();
                
                // æ›´æ–°çµæœæŒ‡æ¨™
                const finalYield = yieldData[yieldData.length - 1];
                const finalSaving = savingData[savingData.length - 1];
                const income = Math.round(finalYield * 0.7);
                const efficiency = Math.round(finalYield * 0.9);
                
                // å‹•ç•«æ›´æ–°æ•¸å€¼
                animateValue('farming-yield', '+' + finalYield + '%', finalYield);
                animateValue('farming-resource', '+' + finalSaving + '%', finalSaving);
                animateValue('farming-income', '+' + income + '%', income);
                animateValue('farming-efficiency', '+' + efficiency + '%', efficiency);
                
                // æ›´æ–°æˆå°±
                if (finalYield > 28 && finalSaving > 30) {
                    document.getElementById('achievement-title').textContent = 'ğŸ† æ™ºæ…§è¾²æ¥­å…ˆé‹’';
                } else if (finalYield > 25) {
                    document.getElementById('achievement-title').textContent = 'ğŸŒ± æ•¸å­—è¾²å ´ç®¡ç†å¸«';
                } else if (finalYield > 20) {
                    document.getElementById('achievement-title').textContent = 'ğŸšœ ç¾ä»£è¾²æ¥­å¯¦è¸è€…';
                } else {
                    document.getElementById('achievement-title').textContent = 'ğŸ”§ è¾²æ¥­æŠ€è¡“å‰µæ–°è€…';
                }
                
            } else if (activePath === 'tourism-path') {
                // ç²å–é„‰æ‘æ—…éŠçš„é¸æ“‡
                const product = document.querySelector('#tourism-path .step:nth-child(1) .option.selected').getAttribute('data-value');
                const facility = document.querySelector('#tourism-path .step:nth-child(2) .option.selected').getAttribute('data-value');
                const service = document.querySelector('#tourism-path .step:nth-child(3) .option.selected').getAttribute('data-value');
                
                // è¨ˆç®—éŠå®¢æ•¸æ“š
                let visitorData = [0];
                let satisfactionData = [0];
                let maxVisitors = 0;
                let maxSatisfaction = 0;
                
                explanationText = "<p><strong>æ—…éŠç”¢å“é¸æ“‡ï¼š</strong>";
                if (product === 'æˆ¶å¤–ç ”å­¸') {
                    maxVisitors = 40; // èª¿æ•´ç‚º35-45%
                    maxSatisfaction = 80;
                    explanationText += "æˆ¶å¤–ç ”å­¸å¸å¼•å®¶åº­å’Œå­¸æ ¡ç¾¤é«”ï¼ŒåŸºç¤éŠå®¢é‡+40%ï¼Œæ»¿æ„åº¦80%ã€‚";
                } else if (product === 'ééºå·¥ä½œåŠ') {
                    maxVisitors = 25;
                    maxSatisfaction = 85;
                    explanationText += "ééºå·¥ä½œåŠå¸å¼•æ–‡åŒ–æ„›å¥½è€…ï¼ŒåŸºç¤éŠå®¢é‡+25%ï¼Œæ»¿æ„åº¦85%ã€‚";
                }
                
                explanationText += "</p><p><strong>é…å¥—è¨­æ–½ï¼š</strong>";
                if (facility === 'æ°‘å®¿') {
                    maxVisitors *= 1.2;
                    maxSatisfaction *= 1.05;
                    explanationText += "æ°‘å®¿æä¾›éå¤œæœå‹™ï¼ŒéŠå®¢é‡+20%ï¼Œæ»¿æ„åº¦+5%ã€‚";
                } else if (facility === 'åœè»Šå ´') {
                    maxVisitors *= 1.3;
                    explanationText += "åœè»Šå ´æ–¹ä¾¿è‡ªé§•éŠå®¢ï¼ŒéŠå®¢é‡+30%ã€‚";
                } else if (facility === 'å»æ‰€') {
                    maxSatisfaction *= 1.1;
                    explanationText += "è¡›ç”Ÿè¨­æ–½æ”¹å–„éŠå®¢é«”é©—ï¼Œæ»¿æ„åº¦+10%ã€‚";
                }
                
                explanationText += "</p><p><strong>æŠ•è¨´è™•ç†ï¼š</strong>";
                if (service === 'å…è²»å‡ç´šæˆ¿å‹') {
                    maxSatisfaction *= 1.1;
                    explanationText += "å…è²»å‡ç´šæˆ¿å‹æœ‰æ•ˆå®‰æ’«éŠå®¢ï¼Œæ»¿æ„åº¦+10%ã€‚";
                } else if (service === 'è´ˆé€ç‰¹è‰²è¾²ç”¢å“') {
                    maxVisitors *= 1.1;
                    maxSatisfaction *= 1.05;
                    explanationText += "è´ˆé€ç‰¹è‰²è¾²ç”¢å“æå‡å£ç¢‘ï¼ŒéŠå®¢é‡+10%ï¼Œæ»¿æ„åº¦+5%ã€‚";
                }
                
                // ç”Ÿæˆå¢é•·æ›²ç·š
                for (let i = 1; i <= 6; i++) {
                    // æ—…éŠå¢é•·æ›²ç·šæœ‰å­£ç¯€æ€§
                    let seasonFactor = i % 2 === 0 ? 1.2 : 0.9;
                    let growth = Math.pow(i/6, 0.6) * seasonFactor;
                    visitorData.push(Math.round(maxVisitors * growth));
                    
                    // æ»¿æ„åº¦å¢é•·è¼ƒå¿«ç„¶å¾Œå¹³ç©©
                    let satGrowth = 1 - Math.exp(-i/2);
                    satisfactionData.push(Math.round(maxSatisfaction * satGrowth));
                }
                
                // æ›´æ–°åœ–è¡¨
                tourismChart.data.datasets[0].data = visitorData;
                tourismChart.data.datasets[1].data = satisfactionData;
                tourismChart.update();
                
                // æ›´æ–°çµæœæŒ‡æ¨™
                const finalVisitors = visitorData[visitorData.length - 1];
                const finalSatisfaction = satisfactionData[satisfactionData.length - 1];
                const employment = Math.round(finalVisitors * 0.6);
                const returnRate = Math.round(finalSatisfaction * 0.5);
                
                // å‹•ç•«æ›´æ–°æ•¸å€¼
                animateValue('tourism-visitors', '+' + finalVisitors + '%', finalVisitors);
                animateValue('tourism-satisfaction', '+' + finalSatisfaction + '%', finalSatisfaction);
                animateValue('tourism-employment', '+' + employment + '%', employment);
                animateValue('tourism-return', '+' + returnRate + '%', returnRate);
                
                // æ›´æ–°æˆå°±
                if (finalVisitors > 35 && finalSatisfaction > 85) {
                    document.getElementById('achievement-title').textContent = 'ğŸ† é„‰æ‘æ—…éŠå¼•é ˜è€…';
                } else if (finalVisitors > 30) {
                    document.getElementById('achievement-title').textContent = 'ğŸŒ³ é„‰æ‘é«”é©—è¨­è¨ˆå¸«';
                } else if (finalVisitors > 25) {
                    document.getElementById('achievement-title').textContent = 'ğŸ¡ ç”°åœ’ç”Ÿæ´»æ¨å»£å“¡';
                } else {
                    document.getElementById('achievement-title').textContent = 'ğŸŒ» é„‰æ‘æ—…éŠåˆå­¸è€…';
                }
            }
            
            // æ›´æ–°æ±ºç­–èªªæ˜
            document.getElementById('explanation-content').innerHTML = explanationText;
        }
        
        // æ•¸å€¼å‹•ç•«å‡½æ•¸
        function animateValue(elementId, endValue, value) {
            const element = document.getElementById(elementId);
            element.textContent = endValue;
            
            // æ ¹æ“šæ•¸å€¼æ­£è² è¨­ç½®é¡è‰²
            if (value < 0) {
                element.classList.add('negative');
                element.classList.remove('metric-value');
            } else {
                element.classList.remove('negative');
                element.classList.add('metric-value');
            }
        }
        
        // åˆå§‹åŒ–
        window.onload = function() {
            initCharts();
            calculateResults();
        };
    </script>
</body>
</html>
